<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Avatar | السلة والدفع</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
  <header class="topbar">
    <a class="brand" href="./index.html">
      <span class="logo" aria-hidden="true">
        <svg width="34" height="34" viewBox="0 0 64 64" fill="none">
          <path d="M32 6l22 12v28L32 58 10 46V18L32 6z" stroke="currentColor" stroke-width="3"/>
          <path d="M20 28l12 7 12-7" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
        </svg>
      </span>
      <span class="brandText">
        <strong>Avatar</strong>
        <small data-i18n="checkout">السلة والدفع</small>
      </span>
    </a>

    <div class="topbarActions">
      <button class="btnGhost" id="langBtn" type="button">EN</button>
      <a class="btnGhost" href="./category.html">
        <span data-i18n="continueShopping">كمل تسوق</span>
      </a>
    </div>
  </header>

  <main class="container">
    <section class="section">
      <div class="twoCol">
        <div class="card">
          <h2 data-i18n="cart">السلة</h2>
          <div id="cartItems" class="cartItems"></div>
          <div class="muted" id="emptyCartMsg" style="display:none" data-i18n="emptyCart">
            السلة فاضية. روح اختار منتجات.
          </div>
        </div>

        <div class="card">
          <h2 data-i18n="checkout">الدفع</h2>

          <div class="row">
            <label class="field grow">
              <span data-i18n="name">الاسم</span>
              <input id="name" type="text" placeholder="Mohamed" />
            </label>
            <label class="field grow">
              <span data-i18n="phone">الموبايل</span>
              <input id="phone" type="tel" placeholder="01xxxxxxxxx" />
            </label>
          </div>

          <label class="field">
            <span data-i18n="address">العنوان</span>
            <input id="address" type="text" placeholder="الشارع، العمارة، الدور..." />
          </label>

          <div class="row">
            <label class="field grow">
              <span data-i18n="gov">المحافظة</span>
              <select id="govSelect"></select>
            </label>
            <div class="summaryBox">
              <div class="muted" data-i18n="shipping">الشحن</div>
              <div class="price" id="shipPrice">—</div>
            </div>
          </div>

          <label class="field">
            <span data-i18n="paymentMethod">طريقة الدفع</span>
            <select id="payMethod">
              <option value="PAYMOB">Paymob (Visa / Wallets)</option>
              <option value="FAWRY">Fawry</option>
              <option value="VODAFONE_CASH">Vodafone Cash</option>
              <option value="INSTAPAY">InstaPay (رفع إيصال)</option>
            </select>
          </label>

          <div class="instapayBox" id="instapayBox" style="display:none">
            <div class="muted" data-i18n="instapayNote">
              هتضيف بيانات InstaPay من تطبيق الأدمن لاحقًا. دلوقتي ارفع الإيصال/سكرين.
            </div>
            <label class="field">
              <span data-i18n="uploadReceipt">رفع الإيصال</span>
              <input id="receipt" type="file" accept="image/*" />
            </label>
            <label class="field">
              <span data-i18n="reference">ملاحظة/رقم مرجعي</span>
              <input id="reference" type="text" placeholder="مثال: رقم التحويل" />
            </label>
          </div>

          <div class="totals">
            <div><span class="muted" data-i18n="subtotal">الإجمالي قبل الشحن</span><span class="price" id="subtotal">—</span></div>
            <div><span class="muted" data-i18n="total">الإجمالي النهائي</span><span class="price big" id="total">—</span></div>
          </div>

          <button class="btnPrimary full" id="placeOrder" type="button" data-i18n="placeOrder">تأكيد الطلب</button>
          <p class="muted note" id="orderMsg"></p>
        </div>
      </div>
    </section>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="./config.js"></script>
<script src="./app.js"></script>
  <script>
    AvatarApp.initPage("cart");
  </script>
</body>
</html>
